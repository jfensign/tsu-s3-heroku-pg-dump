{"filter":false,"title":"dyno_restart.coffee","tooltip":"/src/dyno_restart.coffee","undoManager":{"mark":0,"position":0,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":44,"column":2},"action":"insert","lines":["lib = require './lib'","","_ = require 'underscore'","","do ->","\toutput = []","","\tto = 60000","","\tshell = do lib.heroku.list_dynos","","\tshell.stdout.setEncoding = 'utf8'","\tshell.stderr.setEncoding = 'utf8'","\tshell.stderr.pipe process.stderr","","\tshell.stdout.on 'data', (chunk) ->","\t\toutput.push chunk","","\tshell.stdout.on 'close', ->","\t\traw = (output.join '').split '==='","","\t\tdo raw.shift #do away with empty string","","\t\tsummary = _.extend.apply({}, ((ps) -> ","\t\t\ttmp = {}","\t\t\ttitular = _.first (_.first ps).split ':'","","\t\t\tdo ps.shift #do away with tagging/title","","\t\t\ttmp[(titular.split ' ')[1]] = _.compact ps.map (instance) ->","\t\t\t\tworker = _.first instance.split ':'","\t\t\t\tworker if worker.length > 0","","\t\t\ttmp) i.split '\\n' for i in raw)","","\t\trestart_dyno = (i) ->","\t\t\tsetTimeout (-> ","\t\t\t\tconsole.log 'RESTARTING %s', summary.web[i]","\t\t\t\trestart = lib.heroku.restart_dyno summary.web[i]), to * i","","\t\trestart_dyno i for web, i in summary.web","","","","\t\t"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":44,"column":2},"end":{"row":44,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1416264660442,"hash":"2078ea11a66e43f0069b9e63077bea87c252fdff"}